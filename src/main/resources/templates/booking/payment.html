<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>결제하기 | Asiana Clone</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<section class="container py-5">
    <h2 class="fw-bold mb-4 text-center">결제하기</h2>

    <!-- 선택한 항공편 정보 -->
    <div class="border rounded shadow-sm p-4 mb-5 col-md-8 mx-auto bg-light">
        <h5 class="fw-bold mb-3">선택한 항공편</h5>

        <!-- 출국편 -->
        <div class="mb-3">
            <h6 class="text-primary">출국편</h6>
            <p th:text="${outboundFlight != null ? outboundFlight.flightNumber : '선택된 출국편이 없습니다.'}">OZ101</p>
            <p th:text="${outboundFlight != null ? outboundFlight.departureAirport + ' → ' + outboundFlight.arrivalAirport : ''}">서울 → 도쿄</p>
            <p th:text="${outboundFlight != null ? outboundFlight.departureTime + ' ~ ' + outboundFlight.arrivalTime : ''}">08:00 ~ 10:30</p>
        </div>

        <!-- 귀국편 (왕복일 경우만 표시) -->
        <div th:if="${tripType == 'ROUND'}" class="mb-3">
            <h6 class="text-primary">귀국편</h6>
            <p th:text="${returnFlight != null ? returnFlight.flightNumber : '선택된 귀국편이 없습니다.'}">OZ102</p>
            <p th:text="${returnFlight != null ? returnFlight.departureAirport + ' → ' + returnFlight.arrivalAirport : ''}">도쿄 → 서울</p>
            <p th:text="${returnFlight != null ? returnFlight.departureTime + ' ~ ' + returnFlight.arrivalTime : ''}">19:00 ~ 21:30</p>
        </div>
    </div>

    <!-- 결제 수단 -->
    <form class="border rounded shadow-sm p-4 col-md-6 mx-auto" th:action="@{/inquiry/detail}" method="post">
        <h5 class="fw-bold mb-3">결제 수단 선택</h5>

        <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="paymentMethod" id="creditCard" value="CREDIT_CARD" checked>
            <label class="form-check-label" for="creditCard">신용카드</label>
        </div>

        <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="paymentMethod" id="debitCard" value="DEBIT_CARD">
            <label class="form-check-label" for="debitCard">체크카드</label>
        </div>

        <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="paymentMethod" id="bankTransfer" value="BANK_TRANSFER">
            <label class="form-check-label" for="bankTransfer">무통장입금</label>
        </div>

        <div class="form-check mb-4">
            <input class="form-check-input" type="radio" name="paymentMethod" id="kakaopay" value="KAKAOPAY">
            <label class="form-check-label" for="kakaopay">카카오페이</label>
        </div>

        <!-- hidden 필드로 항공편 정보 전달 -->
        <input type="hidden" name="tripType" th:value="${tripType}">
        <input type="hidden" name="outboundFlight" th:value="${outboundFlight != null ? outboundFlight.flightNumber : ''}">
        <input type="hidden" name="returnFlight" th:value="${returnFlight != null ? returnFlight.flightNumber : ''}">

        <div class="text-center">
            <button type="submit" class="btn btn-success px-5">예약 확정</button>
        </div>
    </form>
</section>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
